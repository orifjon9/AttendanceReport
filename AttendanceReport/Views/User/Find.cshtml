@using AttendanceReport.Models
@using AttendanceReport.Helpers;

@model List<UserViewModel>
@{
    ViewBag.Title = "User Form";
}


<h2>@ViewBag.Title</h2>
<div class="row">
    <div class="col-xs-8 col-xs-offset-2">
        <div class="input-group">
            <table>
                <tr>
                    <td>
                        <input type="text" class="form-control" id="userName" placeholder="Search by User name" />
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button">Search</button>
                        </span>
                    </td>
                    
                </tr>
            </table>
        </div>
    </div>
    <br>
    @if (Model != null)
    {
        <hr />
        <div class="col-sm-12">

            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title"><a href="/user/create">Create New</a></h3>
                </div>

                <table class="table table-hover" id="dev-table">
                    <thead>
                        <tr>
                            <th>User name</th>
                            <th>Password</th>
                            <th>Role</th>
                            <th>Link</th>
                            <th>Edit</th>
                            <th>Remove</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (UserViewModel item in Model)
                        {
                            <tr>
                                <td>@item.UserName</td>
                                <td>***</td>
                                <td>@item.Role</td>
                                <td>*</td>
                                <td> <a href="@("/user/edit/" + item.UserName)">edit</a></td>
                                <td> <a href="@("/user/delete/" + item.UserName)">remove</a></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

        </div>
    }
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script type="text/javascript">
        $('.btn-default').on('click', function () {
            window.location.href = '/user/find/' + $('#userName').val();
        });
    </script>
}